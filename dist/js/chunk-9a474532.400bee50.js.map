{"version":3,"sources":["webpack:///./src/views/crafted/pages/register/UserNameSelection.vue","webpack:///./src/views/crafted/pages/register/UserNameSelection.vue?d30c","webpack:///./src/core/helpers/breadcrumb.ts"],"names":["class","id","ref","type","to","as","onSubmit","validation-schema","validationSchema","onInvalidSubmit","userNameCheckRequestMade","userNameIsAvailable","formData","userName","placeholder","name","autocomplete","checkAvailability","components","Form","Field","ErrorMessage","route","router","params","email","push","loading","initialFormData","values","value","console","log","shape","strict","matches","max","min","required","label","validateUserName","test","String","isValid","ApiService","post","then","response","data","catch","err","error","message","finally","__exports__","render","setCurrentPageBreadcrumbs","pageTitle","breadcrumbs","dispatch","SET_BREADCRUMB_ACTION","title","pageBreadcrumbPath","setCurrentPageTitle"],"mappings":"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","file":"js/chunk-9a474532.400bee50.js","sourcesContent":["<script>\nimport { computed, defineComponent, onMounted, ref } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { Form, ErrorMessage, Field } from \"vee-validate\";\nimport { StepperComponent } from \"@/assets/ts/components\";\nimport { ElMessage } from \"element-plus\";\nimport { useForm } from \"vee-validate\";\nimport Swal from \"sweetalert2/dist/sweetalert2.min.js\";\nimport * as Yup from \"yup\";\nimport ApiService from \"@/core/services/ApiService\";\n// import Step1 from \"@/components/wizard/steps/Step1.vue\";\n// import Step2 from \"@/components/wizard/steps/Step2.vue\";\n// import Step3 from \"@/components/wizard/steps/Step3.vue\";\n// import Step4 from \"@/components/wizard/steps/Step4.vue\";\n// import Step5 from \"@/components/wizard/steps/Step5.vue\";\nimport { setCurrentPageBreadcrumbs } from \"@/core/helpers/breadcrumb\";\n\nexport default defineComponent({\n  name: \"SignUp\",\n  components: {\n    Form,\n    Field,\n    ErrorMessage,\n    // Step1,\n    // Step2,\n    // Step3,\n    // Step4,\n    // Step5,\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n\n    if (!route.params.email) {\n      router.push({ name: \"RegisterBasicInfo\" });\n    }\n    const formRef = ref(null);\n    const loading = ref(false);\n\n    const initialFormData = {\n      userName: \"\",\n    };\n    const formData = ref({ ...initialFormData });\n\n    function onSubmit(values) {\n      router.push({\n        name: \"RegisterBinanceConnection\",\n        params: { ...formData.value, ...route.params },\n      });\n    }\n\n    function onInvalidSubmit() {\n      console.log(\"in valid\");\n    }\n\n    const validationSchema = Yup.object().shape({\n      userName: Yup.string()\n        .strict(true)\n        .matches(/^\\S+$/, \"Name must not contain spaces\")\n        .matches(\n          /^(?=.{2,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/,\n          \"Use special characters carefully.\"\n        )\n        .max(20, \"User Name should be max 20 characters\")\n        .min(2, \"User Name should be min 2 characters\")\n        .required()\n        .label(\"User Name\"),\n    });\n\n    function validateUserName(userName) {\n      return /^(?=.{2,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/.test(\n        String(userName)\n      );\n    }\n\n    const userNameCheckRequestMade = ref(false);\n    const userNameIsAvailable = ref(false);\n\n    function checkAvailability() {\n      userNameCheckRequestMade.value = false;\n      const isValid = validateUserName(formData.value.userName);\n      if (isValid) {\n        ApiService.post(`/auth/search-user-name`, {\n          userName: formData.value.userName,\n        })\n          .then((response) => {\n            userNameIsAvailable.value = !response.data;\n            // ElMessage.success(response.message || \"Trade created successfully!\");\n            // formRef.value.resetForm();\n          })\n          .catch((err) => {\n            ElMessage.error(err.message || \"Server error\");\n          })\n          .finally(() => {\n            userNameCheckRequestMade.value = true;\n            loading.value = false;\n          });\n      }\n    }\n\n    return {\n      userNameIsAvailable,\n      userNameCheckRequestMade,\n      formData,\n      validationSchema,\n      onSubmit,\n      onInvalidSubmit,\n      checkAvailability,\n    };\n  },\n});\n</script>\n<template>\n  <div class=\"card\">\n    <div class=\"card-body shadow-sm\">\n      <div class=\"mb-10 text-center\">\n        <h1 class=\"text-dark mb-3\">Create an Account</h1>\n\n        <div class=\"text-gray-400 fw-bold fs-4\">\n          Already have an account?\n\n          <router-link to=\"/sign-in\" class=\"link-primary fw-bolder\">\n            Sign in here\n          </router-link>\n        </div>\n      </div>\n\n      <div\n        class=\"stepper stepper-links d-flex flex-column\"\n        id=\"kt_create_account_stepper\"\n        ref=\"horizontalWizardRef\"\n      >\n        <div class=\"stepper-nav py-5 mt-5\">\n          <div class=\"stepper-item text-gray-400\" data-kt-stepper-element=\"nav\">\n            <h3 class=\"stepper-title text-gray-400\">Basic Info</h3>\n          </div>\n\n          <div class=\"stepper-item\" data-kt-stepper-element=\"nav\">\n            <h3 class=\"stepper-title text-gray-400\">E-mail Verification</h3>\n          </div>\n\n          <div class=\"stepper-item current\" data-kt-stepper-element=\"nav\">\n            <h3 class=\"stepper-title\">User Name</h3>\n          </div>\n\n          <div class=\"stepper-item\" data-kt-stepper-element=\"nav\">\n            <h3 class=\"stepper-title text-gray-400\">Binance Connection</h3>\n          </div>\n        </div>\n\n        <Form\n          class=\"mx-auto mw-600px w-100 pt-15 pb-10\"\n          ref=\"formRef\"\n          as=\"el-form\"\n          @submit=\"onSubmit\"\n          :validation-schema=\"validationSchema\"\n          @invalid-submit=\"onInvalidSubmit\"\n        >\n          <div class=\"fv-row mb-7\">\n            <div class=\"\">\n              <label class=\"form-label fw-bolder text-dark fs-6\"\n                >User Name</label\n              >\n\n              <span\n                v-if=\"userNameCheckRequestMade && userNameIsAvailable\"\n                class=\"badge badge-light-success mx-2\"\n                >Available</span\n              >\n              <span\n                v-if=\"userNameCheckRequestMade && !userNameIsAvailable\"\n                class=\"badge badge-light-danger mx-2\"\n                >Already taken</span\n              >\n\n              <span v-if=\"userNameCheckRequestMade && !userNameIsAvailable\">\n                <span class=\"form-text text-muted\"> Try another one. </span>\n              </span>\n            </div>\n            <Field\n              v-model=\"formData.userName\"\n              class=\"form-control form-control-lg form-control-solid\"\n              type=\"text\"\n              placeholder=\"\"\n              name=\"userName\"\n              autocomplete=\"off\"\n              @input=\"checkAvailability\"\n            />\n            <div class=\"fv-plugins-message-container\">\n              <div class=\"fv-help-block\">\n                <ErrorMessage\n                  class=\"fv-plugins-message-container invalid-feedback\"\n                  name=\"userName\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <!-- \n          <div class=\"fv-row mb-10\">\n            <label class=\"form-check form-check-custom form-check-solid\">\n              <Field\n                class=\"form-check-input\"\n                type=\"checkbox\"\n                name=\"toc\"\n                value=\"1\"\n              />\n              <span class=\"form-check-label fw-bold text-gray-700 fs-6\">\n                I Agree &\n                <a href=\"#\" class=\"ms-1 link-primary\">Terms and conditions</a>.\n              </span>\n            </label>\n          </div> -->\n\n          <div class=\"text-center\">\n            <button\n              id=\"kt_sign_up_submit\"\n              ref=\"submitButton\"\n              type=\"submit\"\n              class=\"btn btn-lg btn-primary\"\n            >\n              <span class=\"indicator-label\"> Submit </span>\n              <span class=\"indicator-progress\">\n                Please wait...\n                <span\n                  class=\"spinner-border spinner-border-sm align-middle ms-2\"\n                ></span>\n              </span>\n            </button>\n          </div>\n        </Form>\n      </div>\n    </div>\n  </div>\n</template>\n\n","import { render } from \"./UserNameSelection.vue?vue&type=template&id=5ff12476\"\nimport script from \"./UserNameSelection.vue?vue&type=script&lang=js\"\nexport * from \"./UserNameSelection.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/beratuslu/Desktop/fe-coinvestr/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import store from \"@/store\";\nimport { Actions } from \"@/store/enums/StoreEnums\";\n\n/**\n * Sets current page breadcrumbs\n * @param {string} pageTitle Current page title\n * @param {Array<string>} breadcrumbs Current page breadcrumbs\n */\nexport const setCurrentPageBreadcrumbs = (\n  pageTitle: string,\n  breadcrumbs: Array<string>\n): void => {\n  store.dispatch(Actions.SET_BREADCRUMB_ACTION, {\n    title: pageTitle,\n    pageBreadcrumbPath: breadcrumbs,\n  });\n};\n\n/**\n * Sets current page breadcrumbs\n * @param {string} title Current page title name\n */\nexport const setCurrentPageTitle = (title: string): void => {\n  store.dispatch(Actions.SET_BREADCRUMB_ACTION, {\n    title: title,\n  });\n};\n"],"sourceRoot":""}